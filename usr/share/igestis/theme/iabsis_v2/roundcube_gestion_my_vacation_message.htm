<!-- INCLUDE overall_header.htm -->
<h1>{LANG_ROUNDCUBE_MESSAGE_Vacation}</h1>
<h2>{LANG_ROUNDCUBE_DESCRIPTION_Vacation}</h2>

<link rel="stylesheet" href="{TEMPLATE_URL}/roundcube.css" media="screen" type="text/css">
<!-- INCLUDE overall_header2.htm -->

<script type="text/javascript">
show_hide_block('roundcube_menu');

function p_focused(field)
{
	document.getElementById("p_" + field).className = "p_focused";
}

function p_blur(name)
{
	var p = document.getElementById("p_" + name);
	var span = document.getElementById("span_" + name);
	var field = document.getElementById(name);

	p.className = "";
	
	if(name == "email") {
		if(document.getElementById('vacation_message_activated').checked && !is_email(document.getElementById('email').value)) {
			span.innerHTML = "{LANG_ROUNDCUBE_Thanks_to_renseign_a_valid_email}";
		}
		else span.innerHTML = "{LANG_Valide_field_form}";
	}
	
}

function valid_form() {
	if(document.getElementById('vacation_message_activated').checked && !is_email(document.getElementById('email').value)) {
		alert("Merci de saisir un email valide");
		document.getElementById('email').select();
		p_blur(email);
		return false;
	}
	return true;	
}
</script>

					
<div class="main-content-top-actions">
	<span class="inner">
	</span> 
</div>


<div class="main-content-footer">
	<span class="inner">
	<form action="{MODULE_FOLDER_URL}updatedb.php" method="post" onsubmit="return valid_form()">
		<fieldset>
			<input type="hidden" name="Page" value="module" />
			<input type="hidden" name="module_name" value="ROUNDCUBE" />
			<input type="hidden" name="page_url" value="{PAGE_URL}" />
			<input type="hidden" name="section" value="vacation_message" />		
			
			<p id="p_vacation_message_activated">
				<label for="vacation_message_activated">{LANG_ROUNDCUBE_Vacation_message_activated_label}</label>
				<input name="vacation_message_activated" type="checkbox" id="vacation_message_activated" value="1" onchange="javascript:p_blur('email')" onFocus="javascript:p_focused(this.name)" onBlur="javascript:p_blur(this.name)" <!-- IF vacation_message_activated -->checked="checked"<!-- ENDIF --> />
				<span class="error_message" id="span_vacation_message_activated"></span>
			</p>
			
			<p id="p_email">
				<label for="email">{LANG_ROUNDCUBE_Vacation_email_label}</label>
				<input name="email" type="text" id="email" value="{email}" tooltipText="{LANG_ROUNDCUBE_Vacation_Email_field_Description}" onFocus="javascript:p_focused(this.name)" onBlur="javascript:p_blur(this.name)" onkeydown="javascript:p_blur(this.name)" />
				<span class="error_message" id="span_email"></span>
			</p>
			<script type="text/javascript">p_blur('email');</script>
			
			<p id="p_vacation_message">
				<label for="vacation_message">{LANG_ROUNDCUBE_Vacation_message_label}</label>
				<textarea
					style="width:500px; height:250px;"
					name="vacation_message" 
					id="vacation_message"  
					onFocus="javascript:p_focused(this.name)" 
					onBlur="javascript:p_blur(this.name)">{vacation_message}</textarea>
				<span class="error_message" id="span_vacation_message"></span>
			</p>
		</fieldset>	
		
		<input type="image" src="{TEMPLATE_URL}images/bt_valider.gif" class="img" />
	</form>
	</span>
</div>
<!-- INCLUDE overall_footer.htm -->